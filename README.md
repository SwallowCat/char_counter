# Counter Extension - 文字数カウンター Chrome拡張機能

シンプルで使いやすい文字数カウンター機能を提供するChrome拡張機能です。

## 機能

### 📊 文字数カウント
- **空白を除いた文字数**を表示
- リアルタイムでの文字数更新
- 日本語・英語・数字に対応

### 🎯 3つのモード
1. **ポップアップモード（デフォルト）**: 拡張機能アイコンクリックでポップアップ表示
2. **ウィンドウモード**: 新しいウィンドウで文字カウンターを開く
3. **タブモード**: 新しいタブで文字カウンターを開く

### 🔄 インタラクティブカウンター
- ページ上で右クリックメニューから呼び出し
- 選択したテキストを自動読み込み
- ページ上に直接カウンター表示

### 💾 履歴機能
- 過去のテキストを履歴として保存
- 履歴からのワンクリック復元
- 履歴の個別削除・一括削除

### 📋 便利機能
- **コピー**: テキストをクリップボードにコピー
- **貼り付け**: クリップボードからテキストを貼り付け
- **クリア**: テキストエリアをクリア
- **保存**: 現在のテキストを履歴に保存

## インストール方法

### 開発版のインストール
1. このリポジトリをクローンまたはダウンロード
2. Chrome で `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」を有効にする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたフォルダを選択

## 使い方

### 基本的な使い方
1. 拡張機能アイコンをクリック（ポップアップモード）
2. テキストエリアに文字を入力
3. リアルタイムで文字数が表示される

### 右クリックメニュー
- **ページ上で右クリック** → 「文字数カウンター」でインタラクティブカウンターを表示
- **テキスト選択後に右クリック** → 「選択テキストをカウント」で選択テキスト付きカウンター表示

### 設定変更
1. ポップアップまたはウィンドウ内の「設定」ボタンをクリック
2. お好みのモード（ポップアップ/ウィンドウ/タブ）を選択
3. 「保存」をクリック

## プロジェクト構造

```
counter/
├── manifest.json                    # 拡張機能の設定ファイル
├── background/                      # バックグラウンドスクリプト
│   ├── background.js               # メインバックグラウンドスクリプト
│   ├── settings.js                 # 設定管理
│   ├── context-menu.js             # コンテキストメニュー管理
│   ├── window-manager.js           # ウィンドウ管理
│   └── content-script-manager.js   # コンテンツスクリプト管理
├── content/                        # コンテンツスクリプト
│   ├── content.js                  # メインコンテンツスクリプト
│   ├── dom-manager.js              # DOM操作
│   ├── counter-calculator.js       # 文字数計算ロジック
│   ├── template-loader.js          # HTMLテンプレート読み込み
│   ├── event-handlers.js           # イベントハンドリング
│   └── interactive-counter.js      # インタラクティブカウンター
├── popup/                          # ポップアップUI
│   ├── popup.js                    # ポップアップのJavaScript
│   ├── css/
│   │   └── popup.css               # ポップアップのスタイル
│   └── templates/
│       └── popup.html              # ポップアップのHTML
├── templates/                      # HTMLテンプレート
│   └── interactive-counter.html    # インタラクティブカウンターのテンプレート
└── images/                         # アイコン画像
    ├── counter16w.png
    ├── counter48w.png
    └── counter128w.png
```

## 技術仕様

### 対応ブラウザ
- Google Chrome（Manifest V3対応）
- Chromium系ブラウザ

### 使用技術
- **Manifest Version**: 3
- **JavaScript**: ES6+
- **CSS**: CSS3
- **Chrome Extensions API**:
  - Storage API（設定・履歴保存）
  - Context Menus API（右クリックメニュー）
  - Scripting API（コンテンツスクリプト注入）
  - Action API（拡張機能アイコン）

### 権限
- `activeTab`: アクティブタブでの動作
- `tabs`: タブ操作
- `clipboardRead/Write`: クリップボード操作
- `storage`: 設定・履歴の保存
- `contextMenus`: 右クリックメニュー
- `scripting`: コンテンツスクリプト注入

## 開発

### 開発環境のセットアップ
1. リポジトリをクローン
```bash
git clone https://github.com/SwallowCat/char_counter.git
cd char_counter
```

2. Chromeで開発版をロード
- `chrome://extensions/` でデベロッパーモードを有効
- 「パッケージ化されていない拡張機能を読み込む」でフォルダを選択

### デバッグ
- **バックグラウンドスクリプト**: `chrome://extensions/` → 詳細 → バックグラウンドページを検査
- **ポップアップ**: ポップアップを開いて右クリック → 検証
- **コンテンツスクリプト**: ページのDevToolsでコンソールを確認

### ファイル変更時の更新
1. コードを変更
2. `chrome://extensions/` で拡張機能の更新ボタンをクリック
3. 必要に応じてページを再読み込み

## 機能詳細

### 文字数カウント仕様
- **対象**: 空白・改行・タブを除く全文字
- **対応文字**: 
  - 日本語（ひらがな・カタカナ・漢字）
  - 英数字
  - 記号・特殊文字
- **表示形式**: `文字数: X 文字`

### 履歴機能
- **保存件数**: 最大20件
- **保存情報**: テキスト内容、文字数、保存日時
- **表示**: 新しい順に表示
- **操作**: クリックで復元、×ボタンで削除

### インタラクティブカウンター
- **表示位置**: 画面右上（固定位置）
- **設定画面**: 画面右上に表示
- **動作**: ページを離れるまで表示継続

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 貢献

バグ報告や機能提案は、GitHubのIssuesでお知らせください。プルリクエストも歓迎します。

## 更新履歴

### v1.0
- 初回リリース
- 基本的な文字数カウント機能
- 3つの表示モード（ポップアップ/ウィンドウ/タブ）
- インタラクティブカウンター
- 履歴機能
- 設定機能

---

**開発者**: SwallowCat  
**リポジトリ**: https://github.com/SwallowCat/char_counter
